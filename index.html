<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">

    <title>justWalk app</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    
   

    <script src="https://www.gstatic.com/firebasejs/5.9.4/firebase.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.3.0/firebase-app.js"></script>
    
    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-auth.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-database.js"></script>
    
        
        
        </script>


        <script>
            // Your web app's Firebase configuration
            var firebaseConfig = {
                apiKey: "AIzaSyCobqUead56jUglV9AL5g1EL5zimAl1VDM",
                authDomain: "ontime-cfbf2.firebaseapp.com",
                databaseURL: "https://ontime-cfbf2.firebaseio.com",
                projectId: "ontime-cfbf2",
                storageBucket: "ontime-cfbf2.appspot.com",
                messagingSenderId: "895446317584",
                appId: "1:895446317584:web:8ee0c944cade7b7406a895"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
           
          </script>


          <script src="js/index.js"></script>
          <script>
              firebase.auth().onAuthStateChanged(function (user)
              {

                if(user){
                    $('#loginNavId').text("Manage");
                    $('#signUpId').hide();
                    $('#loginNavId').attr("href", "loggedIn.html");
                }

              }
              );
          </script>

           <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>



  </head>
  <body>
      <!--Navigation Menu-->
    <section id="nav_bar">

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="#">justWalk</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
              <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                  <a class="nav-link" href="login.html" id="loginNavId">Login <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="sign_up.html" id="signUpId">Sign Up</a>
                </li>
                
            </div>
          </nav>

    </section>

    <!-- Banner section -->
    <section id="banner">
        <div class="container">
        <div class="row">
       
        <div class="col-md-6">
        <p class="where-title">WHERE DO YOU WANT TO GO?</p>
        <!-- Search box -->
     
            <input id="search_term" class="form-control" type="text" placeholder="Search a location..." aria-label="Search" onkeydown="search(this)">
            
        <p class="late-title">Are you always late?</p>
        <p>Download our revolutionary app that enables you to be there on time based on your own unique average speed!</p>
        </div>
        <div class="col-md-6 text-center">
            <img src="images/main2x.png" class="img-fluid">
        </div>
        </div>
        </div>
    </section>
    
    <!-- Line -->
    <hr>

<!--  -->
    <section id="how">
        <div class="container">
            <div class="row">
           
            <div class="col-md-6">
            <p class="how-title">How does it work?</p>
            <p>When you first download the app and create an account you have to do a speed test. In the speed test you will be asked to walk on your normal walking pace. We will then calculate your own initial average walking pace that will be stored in our database.
                <br>
                <br>We will use that average walking pace to notify you when you should start walking to be there on time on your own pace!
                <br>
                <br>Your average walking pace adjusts and becomes more accurate with every trip you take!</p>
            </div>
            <div class="col-md-6 text-center">
                <img src="images/Walk-city@2x.png" class="img-fluid">
            </div>
            </div>
            </div>    
    </section>

    <section id="pc-laptop">
        <div class="container">
            <div class="row">
            <div class="col-md-6 text-center">
                    <img src="images/pc-mobile@2x.png" class="img-fluid">
            </div>

            <div class="col-md-6">
            <p class="late-title">Plan your next walk from here!</p>
            <p>Our app and web platform integrate seamlessly! Login to your account and plan your upcoming walks from our website. The walk is gonna appear instantly on your mobile device!
                <br>
                <br>Your mobile device will notify you when you should start walking to make it there on time.</p>
            </div>
            
            </div>
            </div>    
    </section>

    <section id="#footer">
        <div class="containerFooter">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#F41E1E" fill-opacity="1" d="M0,64L48,64C96,64,192,64,288,74.7C384,85,480,107,576,133.3C672,160,768,192,864,208C960,224,1056,224,1152,213.3C1248,203,1344,181,1392,170.7L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>
            <!-- <div class="bottom-left"><p>onTime 2020</p></div> -->
        </div>
        
    </section>
   

    
 
    <script>
function activatePlacesSearch(){
    var input = document.getElementById('search_term');
    var autocomplete = new google.maps.places.Autocomplete(input);
}

    </script>
    <script>
        function search(ele) {
    if(event.key === 'Enter') {
        var user = firebase.auth().currentUser;
        if(user){

        //get ref from database, read data and check if there exists a speed of the user. IF it doesnt exist,
        //tell the user that he must complete the test first to plan a trip.
        
        var database = firebase.database();
        var userId = user.uid
        var ref = database.ref('/profiles/'+userId);

        ref.once('value', function (snapshot) {
        if (!snapshot.hasChild("Average Speed")) {
            alert("You have to complete the speed test before planning a test! Download our app, login and you will then be asked to complete the speed test.");
        } 
        
        else{
            var b = document.getElementById('search_term').value
        if(b == ""){
            alert("Please type a location and then click enter.")
            
        }else{
        window.location.href = "gotIt.html";  
            localStorage.setItem("tripValue", b);
            console.log(localStorage.getItem("tripValue"));
    }


    }})
    } else{alert("Please login to plan a trip.");}  
    }
   
} 


    </script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBCv-Rz8niwSqwicymjqs_iKinNNsVBAdQ&libraries=places&callback=activatePlacesSearch"></script>

    </body>
</html>